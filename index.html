<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Scène — Cadeau de Gregos</title>
  <style>
    :root{--bg:#0f1724;--card:#ffffff;--glass:rgba(255,255,255,0.06)}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{background:linear-gradient(180deg,#071029 0%, #0f1724 60%);display:flex;align-items:center;justify-content:center;color:#fff}

    /* scène container */
    .scene{position:relative;width:100%;height:100vh;overflow:hidden}

    /* couche décorative (étoiles / particules simples) */
    .bg-decor{position:absolute;inset:0;pointer-events:none;opacity:.25}

    /* boîte centrale qui contient le PDF */
    .viewer{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.95);width:min(1100px,92vw);height:min(780px,86vh);backdrop-filter:blur(6px);background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));border-radius:14px;box-shadow:0 10px 40px rgba(2,6,23,.6);overflow:hidden;display:flex;flex-direction:column;opacity:0;transition:opacity .9s ease, transform .9s cubic-bezier(.2,.9,.2,1)}

    .viewer.show{opacity:1;transform:translate(-50%,-50%) scale(1)}

    /* entête de la carte */
    .viewer .header{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.03)}
    .logo{width:40px;height:40px;border-radius:8px;background:linear-gradient(135deg,#ff9a9e,#fad0c4);display:flex;align-items:center;justify-content:center;color:#0b1020;font-weight:700}
    .title{font-weight:600}
    .controls{margin-left:auto;display:flex;gap:8px}
    .btn{background:var(--glass);border:none;padding:8px 10px;border-radius:8px;color:inherit;cursor:pointer}

    /* zone PDF */
    .pdf-wrap{flex:1;background:#f6f7f9}
    .pdf-wrap iframe{width:100%;height:100%;border:0;display:block}

    /* fallback message */
    .fallback{padding:18px;font-size:14px;color:#0b1020;background:#fff;text-align:center}

    /* auto-open message */
    .intro{position:absolute;left:50%;top:12vh;transform:translateX(-50%);background:rgba(255,255,255,0.04);padding:10px 16px;border-radius:999px;font-weight:600;backdrop-filter:blur(4px)}

    @media (max-width:600px){.viewer{height:92vh;border-radius:12px}}
  </style>
</head>
<body>
  <div class="scene">
    <div class="bg-decor" aria-hidden>
      <!-- décor : petits cœurs animés -->
      <svg width="100%" height="100%" viewBox="0 0 1200 800" preserveAspectRatio="none" style="display:block">
        <g fill="rgba(255,100,150,0.35)">
          <path d="M10 30 C 10 15, 30 15, 30 30 C 30 45, 10 55, 10 55 C 10 55, -10 45, -10 30 C -10 15, 10 15, 10 30 Z" transform="translate(150,120) scale(1.2)"/>
          <path d="M10 30 C 10 15, 30 15, 30 30 C 30 45, 10 55, 10 55 C 10 55, -10 45, -10 30 C -10 15, 10 15, 10 30 Z" transform="translate(900,220) scale(1.5)"/>
          <path d="M10 30 C 10 15, 30 15, 30 30 C 30 45, 10 55, 10 55 C 10 55, -10 45, -10 30 C -10 15, 10 15, 10 30 Z" transform="translate(400,500) scale(1.1)"/>
          <path d="M10 30 C 10 15, 30 15, 30 30 C 30 45, 10 55, 10 55 C 10 55, -10 45, -10 30 C -10 15, 10 15, 10 30 Z" transform="translate(1050,600) scale(1.3)"/>
        </g>
      </svg>
    </div>

    <div class="intro">Ouverture du cadeau…</div>

    <div id="viewer" class="viewer" role="region" aria-label="Document cadeau de Gregos">
      <div class="header">
        <div class="logo">GG</div>
        <div class="title">Cadeau de Gregos — Aperçu</div>
        <div class="controls">
          <button id="closeBtn" class="btn" title="Fermer">✕</button>
          <button id="downloadBtn" class="btn" title="Télécharger">⬇</button>
        </div>
      </div>
      <div class="pdf-wrap" id="pdfWrap">
        <!-- L'iframe sera remplie par JavaScript pour permettre l'animation d'apparition -->
        <iframe id="pdfFrame" src="about:blank" aria-label="PDF: cadeau de gregos"></iframe>
      </div>
    </div>

  </div>

  <script>
    // Nom du fichier PDF — si le nom contient des espaces, encodez-le comme ci-dessous ou mettez le chemin correct.
    const pdfFile = encodeURI('Cadeau de gregos.pdf');
    // Si votre PDF est dans un sous-dossier, par exemple 'assets/cadeau_de_gregos.pdf', remplacez pdfFile par ce chemin.

    const viewer = document.getElementById('viewer');
    const frame = document.getElementById('pdfFrame');
    const closeBtn = document.getElementById('closeBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    // comportement: ouvrir automatiquement avec une animation
    window.addEventListener('DOMContentLoaded', ()=>{
      // petite temporisation pour laisser voir le message "Ouverture du cadeau..."
      setTimeout(()=>{
        // injecte l'iframe. Utilise l'usage natif du navigateur pour afficher le PDF.
        frame.src = pdfFile;
        // montre la carte avec transition
        requestAnimationFrame(()=> viewer.classList.add('show'));
      }, 600);
    });

    // fermer la vue (retire la carte)
    closeBtn.addEventListener('click', ()=>{
      viewer.classList.remove('show');
      // libère la ressource
      setTimeout(()=> frame.src = 'about:blank', 600);
    });

    // téléchargement direct
    downloadBtn.addEventListener('click', ()=>{
      const a = document.createElement('a');
      a.href = pdfFile;
      a.download = '';
      document.body.appendChild(a);
      a.click();
      a.remove();
    });

    // accessibilité: fermer avec Escape
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){
        viewer.classList.remove('show');
        setTimeout(()=> frame.src = 'about:blank', 600);
      }
    });
  </script>

  <!-- Fallback: si le navigateur ne supporte pas l'affichage dans l'iframe, l'utilisateur verra un lien pour télécharger le PDF -->
  <noscript>
    <div class="fallback">Veuillez activer JavaScript pour afficher le document. <a href="cadeau%20de%20gregos.pdf" download>Télécharger le PDF</a></div>
  </noscript>
</body>
</html>
