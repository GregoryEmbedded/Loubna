<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fleur qui s'ouvre ‚Äî Message d'amour</title>
<style>
  :root{
    --bg1: #0b1226;
    --bg2: #ffdde1;
    --petal1: #ff6fa3;
    --petal2: #ffd07a;
    --center: #fff3d6;
    --text: #3b1f2b;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family: 'Montserrat', sans-serif;}
  body{
    display:flex;
    align-items:center;
    justify-content:center;
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    color:var(--text);
    overflow:hidden;
    padding:2rem;
  }

  .stage{
    width:min(920px,96vw);
    text-align:center;
    position:relative;
  }

  .flower-wrap{
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    width:min(680px,86vw);
    margin:0 auto;
  }

  svg.flower{
    width:80vmin;
    max-width:640px;
    height:auto;
  }

  /* Petals ‚Äî already open (static state) */
  .petal{
    transform-origin: 50% 90%;
    transform-box: fill-box;
    opacity:1;
    transform: scaleY(1);
  }

  /* Animation */
  .petal.animate {
    opacity:0;
    transform: scaleY(0.05) translateY(5%);
    animation: openPetal 900ms cubic-bezier(.2,.9,.25,1) forwards;
  }

  @keyframes openPetal{
    0%   { transform: scaleY(0.05) translateY(5%); opacity:0; }
    60%  { opacity:1; }
    100% { transform: scaleY(1) translateY(0%); opacity:1; }
  }

  .center{
    opacity:1;
    transform:scale(1);
    transform-origin:center;
  }

  .center.animate{
    opacity:0;
    transform:scale(0.4);
    animation:centerPop 600ms cubic-bezier(.2,.9,.25,1) forwards 0.9s;
  }

  @keyframes centerPop{
    to{opacity:1;transform:scale(1);}
  }

  .message{
    position:absolute;
    width:60%;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    font-family: 'Playfair Display', serif;
    font-size:clamp(18px, 3.2vw, 30px);
    opacity:1;
  }

  .typing{
    border-right:2px solid var(--text);
    padding-right:2px;
    white-space:nowrap;
    overflow:hidden;
  }

  .controls{
    margin-top:20px;
  }
  button{
    background:#ffffff22;
    color:white;
    border:1px solid #ffffff44;
    padding:10px 16px;
    border-radius:10px;
    cursor:pointer;
    backdrop-filter:blur(6px);
  }
</style>
</head>
<body>

<div class="stage">
  <h2 style="color:white; font-family:'Playfair Display', serif; text-shadow:0 2px 6px black;">
    Une fleur pour toi
  </h2>

  <div class="flower-wrap">
    <svg class="flower" viewBox="0 0 600 600">
      <defs>
        <radialGradient id="petalGrad">
          <stop offset="0%" stop-color="#fff6fb"/>
          <stop offset="40%" stop-color="#ffd7a8"/>
          <stop offset="100%" stop-color="#ff6fa3"/>
        </radialGradient>

        <radialGradient id="centerGrad">
          <stop offset="0%" stop-color="#fff9e6"/>
          <stop offset="100%" stop-color="#fff0a8"/>
        </radialGradient>
      </defs>

      <g transform="translate(300,300)">
        <g class="petal" style="transform: rotate(0deg);">
          <ellipse cx="0" cy="-140" rx="64" ry="170" fill="url(#petalGrad)"/>
        </g>
        <g class="petal" style="transform: rotate(45deg);">
          <ellipse cx="0" cy="-140" rx="64" ry="170" fill="url(#petalGrad)"/>
        </g>
        <g class="petal" style="transform: rotate(90deg);">
          <ellipse cx="0" cy="-140" rx="64" ry="170" fill="url(#petalGrad)"/>
        </g>
        <g class="petal" style="transform: rotate(135deg);">
          <ellipse cx="0" cy="-140" rx="64" ry="170" fill="url(#petalGrad)"/>
        </g>
        <g class="petal" style="transform: rotate(180deg);">
          <ellipse cx="0" cy="-140" rx="64" ry="170" fill="url(#petalGrad)"/>
        </g>
        <g class="petal" style="transform: rotate(225deg);">
          <ellipse cx="0" cy="-140" rx="64" ry="170" fill="url(#petalGrad)"/>
        </g>
        <g class="petal" style="transform: rotate(270deg);">
          <ellipse cx="0" cy="-140" rx="64" ry="170" fill="url(#petalGrad)"/>
        </g>
        <g class="petal" style="transform: rotate(315deg);">
          <ellipse cx="0" cy="-140" rx="64" ry="170" fill="url(#petalGrad)"/>
        </g>

        <!-- Centre -->
        <circle class="center" r="72" fill="url(#centerGrad)" stroke="#fff5d9" stroke-width="3"/>
      </g>
    </svg>

    <div class="message">
      <span class="typing" id="typed"></span>
    </div>
  </div>

  <div class="controls">
    <button id="replay">R√©ouvrir la fleur üå∏</button>
  </div>
</div>

<script>
const petals = document.querySelectorAll('.petal');
const center = document.querySelector('.center');
const typed = document.getElementById('typed');
const replay = document.getElementById('replay');
const fullText = "Ma ch√©rie, je t'aime plus fort";

function animateFlower(){
  petals.forEach((p,i)=>{
    p.classList.remove('animate');
    void p.offsetWidth; // force repaint
    p.style.animationDelay = (i*0.08)+'s';
    p.classList.add('animate');
  });

  center.classList.remove('animate');
  void center.offsetWidth;
  center.classList.add('animate');

  typed.textContent = "";
  for(let i=0; i<=fullText.length; i++){
    setTimeout(()=> typed.textContent = fullText.slice(0,i), 1000 + i*45);
  }
}

// ‚ñ∂Ô∏è Auto-animation au chargement
window.addEventListener('load', () => {
  setTimeout(animateFlower, 300);
});

// ‚ñ∂Ô∏è Rejouer
replay.addEventListener('click', animateFlower);
</script>

</body>
</html>
